<!DOCTYPE html>
<html lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Connect with SoundCloud</title>
  </head>
  <body onload="">
    <script>
function getQueryVariable(variable) { 
  var query = window.location.search.substring(1); 
  var vars = query.split("&"); 
  for (var i=0;i<vars.length;i++) { 
    var pair = vars[i].split("="); 
    if (pair[0] == variable) { 
      return pair[1]; 
    } 
  } 
  alert('Query Variable ' + variable + ' not found'); 
}

function copyTextToClipboard() {
  var copyText = document.getElementById("code");
  copyText.select();
  copyText.setSelectionRange(0, 99999); // For mobile devices
  navigator.clipboard.writeText(copyText.value);
} 

var code = getQueryVariable('code');
var state = getQueryVariable('state');
if (!!code && !!state) {
  document.write('Your code for ' + state + ' is:<br/>');
  document.write('<input type="text" id="code" value="'+code+'"/>');
  document.write('<button onclick="copyTextToClipboard()">Copy to clipboard</button>');
} else {
  document.write('something went wrong :-(');
}
    </script>
  </body>
</html>
